---
title: ':2021-:9-:6-:约瑟夫环.md'
date: 2021-09-06 21:52:41
tags: 算法
---

# 约瑟夫环
面试时问到了约瑟夫环，tmd一时间没想起，记录一下：

模拟整个删除过程最直观，即构建一个长度为 nn 的链表，各节点值为对应的顺序索引；每轮删除第 mm 个节点，直至链表长度为 1 时结束，返回最后剩余节点的值即可。

模拟法需要循环删除 n - 1n−1 轮，每轮在链表中寻找删除节点需要 mm 次访问操作（链表线性遍历），因此总体时间复杂度为 O(nm)O(nm) 。题目给定的 m, nm,n 取值范围如下所示，观察可知此时间复杂度是不可接受的。
$$
1 \leq n \leq 10^5 \\ 
1 \leq m \leq 10^6
$$
实际上，本题是著名的 “约瑟夫环” 问题，可使用 动态规划 解决。
1. 设f(n,m)表示在n个数字中不断删除第m个数字最后剩下的数字。
2. 第一步删除的元素为(m - 1) % n，用k表示。
第二步删除时，起点是k+1,但区间并不是 0 ~ n-2，所以设从第二步的结果是$f^\prime(n-1, m)$则有：
$$
f(n,m) = f^\prime(n-1, m)
$$
令$f^\prime(n-1, m) = y,f(n,m) = x$给定x到y的映射关系F则有：
$$
y = F(x) = (x + k + 1)\%n \\
f(n,m) = \begin{cases}
0 & n = 1 \\
(f(n - 1, m) + m) \%n & n > 1
\end{cases}
$$

```typescript
function lastRemaining(n: number, m: number): number {
    if(n === 1){
        return 0
    }
    const x = lastRemaining(n-1 ,m)
    return (x + m) % n
};
```

